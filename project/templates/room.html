{% extends "base.html" %}

{% block content %}
	<script type="text/javascript">
		$(document).ready(function() {
			var socket = io.connect("http://127.0.0.1:5000");

			socket.on("song-query-results", function(results) {
				$("#results").empty();
				for (var i = 0; i < results.length; i++) {
					$("#results").append("<li>" + "<img src=" + results[i].album_cover + " height=\"40\" width=\"40\"/>" + results[i].name + "</li>");
				}
				$("#results").css("display", "inline");
			});

			$("#search-button").on("click", function() {
				if ($("#search-box").val() != "") {
					socket.emit("song-query", $("#search-box").val());
					$("#search-box").val("");
				}
			});
		});
	</script>

    <h1>Room {{ room.room_id }}</h1>
    {% if suggest_list %}
        <h3>Current Playlist:</h3>
            <ol>
            {% for song in suggest_list %}
                <li>"{{ song[0] }}" by {{ song[1] }}
            {% endfor %}
            </ol>
    {% endif %}
    <!--<p><a href="{{ url_for('findsong', room_id=room.room_id) }}">Suggest a Song</a></p>-->
    {% if room.owner_id %}
        <p>Owner: {{ room.owner_id }}</p>
    {% endif %}

	<br>
	<input type="text" id="search-box">
	<button id="search-button">Search</button>

	<ul id="results"></ul>
	<button id="submit" style="display:none">Submit</button>
{% endblock %}
